<style>
  @keyframes fade-in-menu {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-menu {
    animation: fade-in-menu 0.3s ease-out;
  }

  /* Hamburger to X animation */
  .hamburger span {
    transition: all 0.3s ease;
  }

  .hamburger.active span:nth-child(1) {
    transform: rotate(45deg) translateY(8px);
    width: 1.9rem;

  }

  .hamburger.active span:nth-child(2) {
    opacity: 0;
  }

  .hamburger.active span:nth-child(3) {
    transform: rotate(-45deg) translateY(-8px);
    width: 1.8rem;
  }
</style>

<nav class="bg-white shadow-md sticky top-0 z-20">
  <div class="max-w-6xl mx-auto flex justify-between items-center px-5 py-3">
    <!-- Logo -->
    <a href="/" class="text-2xl font-bold text-blue-600 tracking-tight">MyStay</a>

    <!-- Hamburger Button (Mobile) -->
    <button id="menu-toggle"
      class="hamburger sm:hidden flex flex-col justify-center items-center space-y-1.5 focus:outline-none">
      <span class="block w-6 h-0.5 bg-gray-800 rounded"></span>
      <span class="block w-6 h-0.5 bg-gray-800 rounded"></span>
      <span class="block w-6 h-0.5 bg-gray-800 rounded"></span>
    </button>

    <!-- Navigation Links -->
    <ul id="menu"
      class="sm:flex sm:space-x-1 md:space-x-4 hidden flex-col sm:flex-row absolute sm:static top-16 left-0 w-full sm:w-auto bg-white sm:bg-transparent p-5 sm:p-0 space-y-3 sm:space-y-0 sm:items-center shadow-lg sm:shadow-none rounded-b-lg">
      <li>
        <a href="/"
          class="transition-colors duration-200 text-blue-600 p-2 rounded font-medium <%= currentPage === 'home' ? 'bg-blue-100' : 'hover:bg-blue-100' %>">Home</a>
      </li>
      <% if (isLoggedIn) { %>
        <li>
          <a href="/favourites"
            class="transition-colors duration-200 text-blue-600 p-2 rounded font-medium <%= currentPage === 'favourites' ? 'bg-blue-100' : 'hover:bg-blue-100' %>">Favourites</a>
        </li>
        <li>
          <a href="/bookings"
            class="transition-colors duration-200 text-blue-600 p-2 rounded font-medium <%= currentPage === 'bookings' ? 'bg-blue-100' : 'hover:bg-blue-100' %>">Bookings</a>
        </li>
        <li>
          <% if (userType==='host' ) { %>
            <a href="/host/host-homes"
              class="transition-colors duration-200 text-blue-600 p-2 rounded font-medium <%= currentPage === 'hostHomes' ? 'bg-blue-100' : 'hover:bg-blue-100' %>">Host
              Homes</a>
        </li>
        <li>
          <a href="/host/add-home"
            class="transition-colors duration-200 text-blue-600 p-2 rounded font-medium <%= currentPage === 'addHome' ? 'bg-blue-100' : 'hover:bg-blue-100' %>">Add
            Home</a>
        </li>
        <% } %>

          <% } %>
            <li>
              <a href="/about"
                class="transition-colors duration-200 text-blue-600 p-2 rounded font-medium <%= currentPage === 'about' ? 'bg-blue-100' : 'hover:bg-blue-100' %>">About</a>
            </li>
            <li class="sm:hidden cursor-pointer">
              <%  if (!isLoggedIn) {  %>
              <a href="/auth/login"
                class="block text-center bg-blue-600 text-white rounded-md py-2 font-medium hover:bg-blue-700 transition-colors">
                  Log in / Sign up
              </a>
              <% } else { %>
                <form action="/auth/logout" method="POST"
                  class="block text-center bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700 transition-colors">
                  <button class=" px-4 py-2 " type="submit">Logout</button>
                </form>
                <% } %>
            </li>
    </ul>

    <!-- Desktop Login Button -->
    <% if (!isLoggedIn) { %>
      <a href="/auth/login"
        class=" hidden sm:block bg-blue-600 text-white px-4 py-2 rounded-md font-medium hover:bg-blue-700 transition-colors">
        Log in / Sign up
      </a>
      <% } else { %>
        <form action="/auth/logout" method="POST"
          class="hidden  sm:block  bg-blue-600 text-white  rounded-md font-medium hover:bg-blue-700 transition-colors">
          <button class="px-4 py-2" type="submit">Logout</button>
        </form>
        <% } %>

  </div>
</nav>

<script defer>
  document.addEventListener("DOMContentLoaded", function () {
    const menuButton = document.getElementById("menu-toggle");
    const menu = document.getElementById("menu");

    menuButton.addEventListener("click", () => {
      menuButton.classList.toggle("active");
      if (menu.classList.contains("hidden")) {
        menu.classList.remove("hidden");
        menu.classList.add("animate-fade-in-menu");
        setTimeout(() => {
          menu.classList.remove("animate-fade-in-menu");
        }, 300);
      } else {
        menu.classList.add("hidden");
      }
    });
  });
</script>